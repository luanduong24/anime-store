/* =====================================================
   Khuyến mãi — Theme đồng bộ + Hover nâng cấp (gọn)
   ===================================================== */
:root{
  --bg:#0c0d10; --bg-soft:#12141a; --card:#171923; --border:#222433;
  --text:#e7e9ee; --muted:#9aa3b2;
  --primary:#7c5cff; --primary-2:#a58cff; --primary-rgb:124,92,255;
  --accent:#ff6b6b; --success:#37d67a; --warning:#ffd46f;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --radius:18px; --radius-md:14px; --radius-sm:10px;
}

@media (prefers-reduced-motion: reduce){
  *{animation:none!important;transition:none!important;scroll-behavior:auto!important}
}

/* Base */
html,body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Noto Sans"}
.promo-main{max-width:1200px;margin:0 auto;padding:0 16px 48px}

/* ===== Buttons (global look) ===== */
.btn{
  display:inline-flex;align-items:center;gap:.5rem;
  padding:.8rem 1.05rem;border-radius:12px;
  border:1px solid rgba(255,255,255,.06);
  background:transparent;color:var(--text);
  cursor:pointer;user-select:none;
  transition:transform .18s ease,filter .18s ease,box-shadow .18s ease,border-color .18s ease,background-color .18s ease;
}
.btn.primary{
  background:linear-gradient(180deg,var(--primary),var(--primary-2));
  color:#fff; box-shadow:var(--shadow); border-color:rgba(255,255,255,.06);
}
.btn.ghost,.btn.outline{background:transparent;border:1px solid var(--border)}
.btn.small{padding:.55rem .75rem;border-radius:10px}
.btn[disabled]{opacity:.55;cursor:not-allowed}

/* Hover nâng cấp */
.btn:hover{transform:translateY(-2px) scale(1.02);border-color:var(--primary)}
.btn.primary:hover{filter:brightness(1.08);box-shadow:0 10px 24px rgba(var(--primary-rgb),.35)}
.btn.outline:hover,.btn.ghost:hover{background-color:rgba(var(--primary-rgb),.08)}
.btn:focus-visible{outline:2px solid var(--primary);outline-offset:2px}

/* ===== Pills (hero badges) ===== */
.pill{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .6rem;border-radius:999px;border:1px solid var(--border);background:#1a1d27;color:var(--text);font-size:12px;transition:transform .18s ease,box-shadow .18s ease,border-color .18s}
.pill-hot{background:#2a1b27;color:#ff9bc8;border-color:#3a2132}
.pill-flash{background:#2b1f16;color:#ffc49a;border-color:#3a2a1b}
.pill-new{background:#1a222f;color:#9bd1ff;border-color:#263247}
.pill:hover{transform:translateY(-1px);box-shadow:0 6px 14px rgba(0,0,0,.25);border-color:var(--primary)}

/* ===== HERO ===== */
.promo-hero{position:relative;padding:54px 0 28px;text-align:center}
.promo-hero .hero-bg{position:absolute;inset:0;background:radial-gradient(1200px 200px at 50% -10%,rgba(var(--primary-rgb),.25),transparent 60%);pointer-events:none}
.hero-badges{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;position:relative;z-index:1}
.hero-title{margin:10px 0 6px;line-height:1.1;position:relative;z-index:1}
.hero-title .grad-text{font-size:clamp(28px,5vw,44px);font-weight:800;background:linear-gradient(180deg,#fff,#bfc6ff 70%);-webkit-background-clip:text;background-clip:text;color:transparent}
.hero-title .sub{display:block;color:var(--primary-2);font-size:clamp(14px,2.2vw,18px);margin-top:4px}
.hero-desc{max-width:860px;margin:10px auto 14px;color:var(--muted)}
.hero-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:8px}
.hero-stats{display:flex;gap:24px;justify-content:center;list-style:none;margin:16px 0 0;padding:0;color:var(--muted)}
.hero-stats strong{display:block;color:#fff;font-size:18px}

/* ===== Controls ===== */
.promo-controls{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin:18px 0}
.filters{display:flex;gap:8px;flex-wrap:wrap}
.chip{border:1px solid var(--border);background:var(--bg-soft);color:var(--text);padding:.55rem .9rem;border-radius:999px;cursor:pointer;white-space:nowrap;transition:transform .12s,border-color .18s,box-shadow .18s}
.chip:hover{transform:translateY(-1px);border-color:var(--primary)}
.chip.is-active{background:#1a1d27;border-color:var(--primary);box-shadow:inset 0 0 0 1px rgba(var(--primary-rgb),.25),0 6px 20px rgba(var(--primary-rgb),.15)}
.sort{display:inline-flex;align-items:center;gap:8px;color:var(--muted)}
.sort select{background:#10121a;border:1px solid var(--border);color:var(--text);padding:.5rem .75rem;border-radius:10px}

/* ===== Grid + Card ===== */
.promo-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);transition:transform .18s,border-color .18s,box-shadow .18s}
.card:hover{transform:translateY(-2px);border-color:#30344a;box-shadow:0 18px 44px rgba(0,0,0,.5)}
.card-img{position:relative;aspect-ratio:4/3;background:#0a0c12;overflow:hidden}
.card-img img{width:100%;height:100%;object-fit:cover;display:block}
.badge{position:absolute;top:10px;left:10px;background:var(--success);color:#08110c;font-weight:600;font-size:12px;padding:.25rem .45rem;border-radius:999px}
.badge.flash{left:auto;right:10px;background:var(--warning);color:#2c220a}
.badge.hot{background:var(--accent);color:#2b0d0d}
.card-body{padding:10px}
.card-title{font-weight:700;margin:2px 0 6px}
.card-meta{color:var(--muted);font-size:13px;margin-bottom:8px}
.stock{color:#b6f5c8}

/* Price */
.price{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.price .final{color:#e9ff9a;font-weight:800}
.price .original{color:#9aa3b2;text-decoration:line-through}
.price .off{background:#2a1b27;color:#ff9bc8;border:1px solid #3a2132;border-radius:999px;font-size:12px;padding:.15rem .45rem}

/* Coupon row */
.coupon-row{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;margin-bottom:10px}
.coupon-input{width:100%;background:#10121a;border:1px solid var(--border);color:var(--text);padding:.55rem .7rem;border-radius:10px;transition:border-color .18s,box-shadow .18s}
.coupon-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}
.apply-ok{color:#b6f5c8}
.apply-err{color:#ffb7b7}
.apply-msg{font-size:12px;color:var(--muted)}
.apply-coupon.applied{border-color:var(--success);box-shadow:inset 0 0 0 1px rgba(55,214,122,.25)}

/* Actions */
.card-actions{display:flex;gap:8px;flex-wrap:wrap}
.card-actions .btn{flex:1}

/* ===== Extra info ===== */
.promo-extra{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:20px}
.promo-extra > div{background:linear-gradient(180deg,#0e1016,#0b0d13);border:1px solid var(--border);border-radius:16px;padding:12px}
.promo-extra h3{margin:0 0 6px;display:flex;align-items:center;gap:8px}
.promo-extra p{color:var(--muted);margin:0}

/* =========================
   Modal (dialog) — gọn & fix
   ========================= */
.pmodal{border:none;padding:0;background:transparent;position:relative}
.pmodal::backdrop{background:rgba(0,0,0,.6);backdrop-filter:saturate(120%) blur(3px)}

/* Backdrop nội bộ để click ra ngoài đóng */
.pmodal__backdrop{
  position:fixed; inset:0; background:transparent; z-index:0;
}

/* Panel luôn ở trên backdrop; cho nút close cao nhất */
.pmodal__panel{
  background:var(--card); border:1px solid var(--border); border-radius:18px;
  box-shadow:var(--shadow);
  max-width:900px; width:min(900px,calc(100vw - 24px));
  margin:auto; overflow:visible;        /* không cắt nút */
  position:relative; z-index:10;        /* cao hơn backdrop */
}

/* Close button không bị che */
.pmodal__close{
  position:absolute; top:10px; right:10px;
  z-index:50; width:36px; height:36px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--border); border-radius:10px;
  background:#10121a; color:var(--text); cursor:pointer;
  transition:transform .18s, filter .18s, border-color .18s;
}
.pmodal__close:hover{transform:translateY(-1px);filter:brightness(1.05);border-color:var(--primary)}

.pmodal__grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:14px;position:relative;z-index:1}
@media (max-width:820px){ .pmodal__grid{grid-template-columns:1fr} }

.pmodal__media,.pmodal__content{
  background:#0f121a;border:1px solid var(--border);border-radius:14px;padding:12px;
  position:relative; z-index:1;
}

/* Media */
.pmodal__hero{aspect-ratio:4/3;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#0a0c12;margin-bottom:8px}
#pm-hero{width:100%;height:100%;object-fit:cover;display:block}

.pmodal__thumbs{display:flex;gap:8px;flex-wrap:wrap}
.pmodal__thumbs button{
  background:#10131b;border:1px solid var(--border);border-radius:10px;padding:3px;cursor:pointer;
  transition:transform .18s,border-color .18s,box-shadow .18s;
}
.pmodal__thumbs button:hover{transform:translateY(-2px) scale(1.05);border-color:var(--primary);box-shadow:0 6px 14px rgba(var(--primary-rgb),.3)}
.pmodal__thumbs button.is-active{border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.35) inset}
.pmodal__thumbs img{width:56px;height:56px;object-fit:cover;border-radius:8px;display:block}

/* Content */
.pm-title{margin:0 0 6px}
.pm-meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
.pm-chip{
  background:#1c2030;border:1px solid var(--border);color:var(--muted);
  border-radius:999px;padding:.2rem .55rem;font-size:12px;
  transition:background-color .18s,transform .18s,box-shadow .18s,border-color .18s;
}
.pm-chip:hover{background-color:rgba(var(--primary-rgb),.12);border-color:var(--primary);transform:translateY(-1px);box-shadow:0 6px 14px rgba(0,0,0,.25)}
.pm-stock{font-size:12px;color:#b6f5c8}
.pm-stock.is-out{color:#ffb7b7}

.pm-price{display:flex;align-items:center;gap:10px;margin:6px 0 10px}
.pm-price .final{color:#e9ff9a;font-weight:800}
.pm-price .original{color:#9aa3b2;text-decoration:line-through}
.pm-price .off{background:#2a1b27;color:#ff9bc8;border:1px solid #3a2132;border-radius:999px;font-size:12px;padding:.15rem .45rem}

.pm-coupon{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;margin-bottom:6px}
.pm-coupon input{
  background:#10121a;border:1px solid var(--border);color:var(--text);
  padding:.55rem .7rem;border-radius:10px;transition:border-color .18s,box-shadow .18s;
}
.pm-coupon input::placeholder{color:var(--muted)}
.pm-coupon input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}
#pm-apply.applied{border-color:var(--success);box-shadow:inset 0 0 0 1px rgba(55,214,122,.25)}
.apply-ok{color:#b6f5c8}.apply-err{color:#ffb7b7}

/* Dùng nút chung trong modal (hover đã có ở .btn) */
.pmodal .btn{border-color:var(--border);}

/* Fix Safari để border-radius + overflow hoạt động mượt */
.pmodal__hero,.pmodal__media,.pmodal__content{-webkit-mask-image:-webkit-radial-gradient(white, black)}

/* ===== Toast ===== */
.toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#10121a;border:1px solid var(--border);color:#fff;padding:.6rem .9rem;border-radius:12px;box-shadow:var(--shadow);z-index:9999}

/* ===== Responsive ===== */
@media (max-width:1100px){ .promo-grid{grid-template-columns:repeat(3,1fr)} }
@media (max-width:820px){
  .promo-grid{grid-template-columns:repeat(2,1fr)}
}
@media (max-width:560px){
  .promo-grid{grid-template-columns:1fr}
  .hero-stats{gap:12px}
  .promo-extra{grid-template-columns:1fr}
}

/* === PATCH: làm sáng chữ trong modal xem chi tiết === */
.pmodal h1,
.pmodal h2,
.pmodal h3,
.pmodal .pm-title,
.pmodal .pm-section h3 {
  color: var(--text);
}

.pmodal .pm-text,            /* mô tả */
.pmodal .pm-kv,              /* danh sách key-value */
.pmodal .pm-kv li,
.pmodal .pm-meta,            /* dòng series + tồn kho */
.pmodal .pm-section p {
  color: var(--text);
}

/* Nhấn mạnh key */
.pmodal .pm-kv strong { color: var(--text); opacity: .95; }

/* Giữ các thành phần “nhạt” đúng ý */
.pmodal .pm-chip { color: var(--muted); }
.pmodal .pm-stock.is-out { color: #ffb7b7; }

/* Placeholder input trong modal cũng sáng hơn một chút */
.pmodal ::placeholder { color: #bfc6d9; opacity: 1; }
