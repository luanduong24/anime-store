<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đăng nhập - Anime Store</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>
    <h2>Đăng nhập</h2>
    <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email"><br>
        <input type="password" id="loginPassword" placeholder="Mật khẩu"><br>
        <label><input type="checkbox" id="remember"> Ghi nhớ mật khẩu</label><br>
        <button type="submit">Đăng nhập</button>
        <p><a href="forgot.html">Quên mật khẩu?</a></p>
        <p><a href="register.html">Chưa có tài khoản? Đăng ký</a></p>
        

    <script>
        const loginForm = document.getElementById("loginForm");

        document.addEventListener("DOMContentLoaded", () => {
            const savedEmail = localStorage.getItem("rememberedEmail");
            const savedPassword = localStorage.getItem("rememberedPassword");
            if(savedEmail && savedPassword){
                document.getElementById("loginEmail").value = savedEmail;
                document.getElementById("loginPassword").value = savedPassword;
                document.getElementById("remember").checked = true;
            }
        });

        loginForm.addEventListener("submit", function(e){
            e.preventDefault();
            const email = document.getElementById("loginEmail").value.trim();
            const password = document.getElementById("loginPassword").value.trim();
            const remember = document.getElementById("remember").checked;

            const users = JSON.parse(localStorage.getItem("users") || "[]");
            const user = users.find(u => u.email === email && u.password === password);

            if(user){
                if(remember){
                    localStorage.setItem("rememberedEmail", email);
                    localStorage.setItem("rememberedPassword", password);
                } else {
                    localStorage.removeItem("rememberedEmail");
                    localStorage.removeItem("rememberedPassword");
                }
                localStorage.setItem("currentUser", JSON.stringify(user));
                window.location.href = "index.html";
            } else {
                alert("Email hoặc mật khẩu sai");
            }
        });
    </script>
</body>
</html>